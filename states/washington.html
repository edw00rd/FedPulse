<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Washington State Representatives</title>
    <style>
        body { font-family: Arial, sans-serif; text-align: center; }
        .header { margin: 20px; }
        .state-flag { width: 200px; }
        .members-container { display: flex; flex-wrap: wrap; justify-content: center; }
        .member { width: 200px; margin: 20px; text-align: center; }
        .member img { width: 150px; height: 200px; object-fit: cover; border-radius: 10px; }
        .member a { text-decoration: none; color: black; font-weight: bold; display: block; margin-top: 10px; }
    </style>
</head>
<body>
    <div class="header">
        <h1>Washington</h1>
        <img class="state-flag" src="https://upload.wikimedia.org/wikipedia/commons/thumb/5/54/Flag_of_Washington.svg/800px-Flag_of_Washington.svg.png" alt="Washington State Flag">
    </div>

    <h2>Current U.S. Senators and Representatives</h2>
    <div class="members-container" id="members"></div>

    <script>
        async function fetchWashingtonMembers() {
            try {
                const response = await fetch("https://www.govtrack.us/api/v2/role?current=true&state=WA");
                const data = await response.json();

                let membersContainer = document.getElementById("members");
                membersContainer.innerHTML = ""; 

                data.objects.forEach(member => {
                    let memberDiv = document.createElement("div");
                    memberDiv.classList.add("member");

                    // Use GovTrack's official photo URL format
                    let img = document.createElement("img");
                    img.src = `https://www.govtrack.us/static/legislator-photos/${member.person.id}-100px.jpeg`;
                    img.alt = member.person.name;
                    img.onerror = function() { this.src = "https://via.placeholder.com/150"; }; // Fallback image

                    let link = document.createElement("a");
                    link.href = `https://www.congress.gov/member/${member.person.id}`;
                    link.textContent = member.person.name;

                    memberDiv.appendChild(img);
                    memberDiv.appendChild(link);
                    membersContainer.appendChild(memberDiv);
                });

            } catch (error) {
                console.error("Error fetching representatives:", error);
                document.getElementById("members").innerHTML = "<p>Failed to load representatives.</p>";
            }
        }

        fetchWashingtonMembers();
    </script>
</body>
</html>
